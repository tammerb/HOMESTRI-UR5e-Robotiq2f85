<root main_tree_to_execute="MainTree">


    <BehaviorTree ID="MainTree">
        <Sequence>

            <SetBlackboard name="SetBlackboard" output_key="pose" value="1;0;0;0;0;0" />

            <AddCollisionMeshService 
                service_name="apply_planning_scene"
                name="place collision object"
                mesh_path="package://homestri_description/meshes/components/collision/2assembly_nonmoving_components.stl"
                pose="{pose}"
                id="static_assembly"
                frame_id="base_link"
            />

            <DetectFrame 
                name="find pose of aruco tag"
                target_frame="target_frame"
                source_frame="world"
                output_pose="{object_pose}"
                timeout="3.0"
                />

            <ManipulationAction
                name="move arm to object"
                server_name="manip_as"
                id="arm_pose"
                pose="{object_pose}"
                offset="0"
            />   

            <ManipulationAction
                name="close gripper and grasp"
                server_name="manip_as"
                id="gripper_close"
            />     
        </Sequence>

    </BehaviorTree>

</root>