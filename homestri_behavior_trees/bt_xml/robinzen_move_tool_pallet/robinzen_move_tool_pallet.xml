<root main_tree_to_execute="MainTree">


    <BehaviorTree ID="MainTree">
        <Sequence>

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="scaled_pos_joint_traj_controller"
            />


            <!-- 0.219488; 0.63343; 0.88831
            0.0061415; 0.71035; -0.014662; 0.70367 -->

            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="0.139488;0.63343;0.88831;0.0061415;0.71035;-0.014662;0.70367"
                translational_offset="0;0;0"
            />

            <DetectFrame
                source_frame="pallet_handle"
                target_frame="world"
                output_pose="{pallet_handle_pose}"
                timeout="3.0"
            />

            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="{pallet_handle_pose}"
                translational_offset="-0.15;0;0"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0"
                max_effort="20"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.8"
                max_effort="100"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="-0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.5;-0.7;0;0;0;-1.5707"
                duration="25.0"
                frame_id="world"
                mode="offset"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.14;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0"
                max_effort="20"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="-0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />















        </Sequence>

    </BehaviorTree>

</root>