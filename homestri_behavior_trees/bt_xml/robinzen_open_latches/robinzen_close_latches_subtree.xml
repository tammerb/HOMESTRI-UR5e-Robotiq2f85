<root>
     <!-- 
    inputs: 
      - latch_pose
  -->
    <BehaviorTree ID="CloseLatchSubtree">
        <Sequence>

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.3"
                max_effort="20"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                pose="{latch_pose}"
                offset="-0.20;0;0;0;0;0"
                duration="15.0"
                frame_id="world"
                mode="target"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                pose="{latch_pose}"
                offset="-0.025;0;0;0;0;0"
                duration="15.0"
                frame_id="world"
                mode="target"
            />


            <TriggerService
                service_name="/ur_hardware_interface/zero_ftsensor"
            />


            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="cartesian_compliance_controller"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.8"
                max_effort="50"
            /> 

            <ComplianceControlAction
                server_name="compliance_control"
                offset="0;0;0;-1.5707;0;0"
                wrench="0;0;0;-4;0;0"
                frame_id="gripper_tip_link"
                mode="offset"
            />   

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0"
                max_effort="50"
            /> 


             <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="-0.2;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />
        </Sequence>

    </BehaviorTree>

</root>