<root>
    <!-- 
    inputs: 
      - object
      - object_pose
      - gripper_start_position
      - gripper_end_position
      - manip_offset_1
      - manip_duration_1
      - manip_offset_2
      - manip_duration_2
  -->
    <BehaviorTree ID="PickCartesianSubtree">

        <Sequence name="pick the {object}">

            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="{object_pose}"
                translational_offset="-0.15;0;0"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="{gripper_start_position}"
                max_effort="20"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="{gripper_end_position}"
                max_effort="20"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="{manip_offset_1}"
                duration="{manip_duration_1}"
                frame_id="gripper_tip_link"
                mode="offset"
            />
            <CartesianControlAction
                server_name="cartesian_control"
                offset="{manip_offset_2}"
                duration="{manip_duration_2}"
                frame_id="gripper_tip_link"
                mode="offset"
            />
        </Sequence>
    </BehaviorTree>

</root>