<root>
  <!-- 
    inputs: 
      - object_pose
      - approach_offset 
  -->
  <BehaviorTree ID="PickSubTree">

    <Sequence name="pick up {object_id}">
      
      <ManipulationAction
        name="move arm above {object_id}"
        server_name="manip_as"
        id="arm_pose"
        pose="{object_pose}"
        offset="{approach_offset}"
      />

      <ManipulationAction
        name="open gripper"
        server_name="manip_as"
        id="gripper_open"
      />

      <ManipulationAction
        name="approach {object_id}"
        server_name="manip_as"
        id="arm_approach"
        offset="{approach_offset}"
      />

      <ManipulationAction
        name="close gripper and grasp {object_id}"
        server_name="manip_as"
        id="gripper_close"
      />

      <GraspedCondition
        name="check if {object_id} is grasped"
        topic_name="robotiq_2f_85_gripper/state"
      />

      <ManipulationAction
        name="retract arm"
        server_name="manip_as"
        id="arm_retreat"
        offset="{approach_offset}"
      />

    </Sequence>
  </BehaviorTree>

</root>
  