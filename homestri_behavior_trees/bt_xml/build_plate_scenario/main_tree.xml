<root main_tree_to_execute="MainTree">


    <BehaviorTree ID="MainTree">
        <Sequence>

            


            
            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="scaled_pos_joint_traj_controller"
            />

            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="0.65788;-0.14736;1.0277;-0.0040468;0.25717;-0.047303;0.9652"
                translational_offset="0;0;0"
            />

            <DetectFrame
                source_frame="plate_tab"
                target_frame="world"
                output_pose="{plate_tab}"
                timeout="3.0"
            />


            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="{plate_tab}"
                translational_offset="-0.15;0;0"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.4"
                max_effort="10"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            

            <TriggerService
                service_name="/ur_hardware_interface/zero_ftsensor"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="cartesian_compliance_controller"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="1.18"
                max_effort="25"
            />

            <ComplianceControlAction
                server_name="compliance_control"
                offset="0;0;0.084;0;0;0"
                wrench="0;0;35;0;0;0"
                frame_id="world"
                mode="offset"
            />   

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="1.18"
                max_effort="40"
            />


            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;0;0.1;0;0;0"
                duration="8.0"
                frame_id="world"
                mode="offset"
            />



            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="scaled_pos_joint_traj_controller"
            />

            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="0.1314;0.6;0.97028;-0.5;-0.5;0.5;0.5"
                translational_offset="0;0;0"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;0.35;0;0;0;0"
                duration="20.0"
                frame_id="world"
                mode="offset"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;0;-0.22;0;0;0"
                duration="12.0"
                frame_id="world"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.4"
                max_effort="10"
            />



            <CartesianControlAction
                server_name="cartesian_control"
                offset="-0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="1.18"
                max_effort="40"
            />

            

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;0;0.22;0;0;0"
                duration="12.0"
                frame_id="world"
                mode="offset"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;-0.35;0;0;0;0"
                duration="20.0"
                frame_id="world"
                mode="offset"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="scaled_pos_joint_traj_controller"
            />

            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="{plate_tab}"
                translational_offset="-0.005;-0.2;0"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;0;-0.19;0;0;0"
                duration="20.0"
                frame_id="world"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.4"
                max_effort="30"
            />

            <CartesianControlAction
                server_name="cartesian_control"
                offset="-0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

<!-- 
            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.3"
                max_effort="20"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="forward_cartesian_traj_controller"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.8"
                max_effort="20"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="0;0;0.2;0;0;0"
                duration="10.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />


            <CartesianControlAction
                server_name="cartesian_control"
                offset="-0.15;0;0;0;0;0"
                duration="8.0"
                frame_id="gripper_tip_link"
                mode="offset"
            />

            <SwitchControllerService
                service_name="controller_manager/switch_controller"
                controller="scaled_pos_joint_traj_controller"
            />
            
            <ManipulationAction
                server_name="manip_as"
                id="arm_pose"
                pose="{pallet_tool_slot_l}"
                translational_offset="-0.15;0;0"
            />


            <GripperAction
                server_name="gripper_controller/gripper_cmd"
                position="0.3"
                max_effort="20"
            /> -->
        </Sequence>

    </BehaviorTree>

</root>